{"ast":null,"code":"var _jsxFileName = \"/Users/firanolabdisa/Desktop/cs472-project/daily-diary-front/src/contexts/PostsContext.tsx\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initStateValue = {\n  posts: [],\n  searchDate: new Date(),\n  isVoted: false,\n  isAddedNew: false,\n  loading: false,\n  notify: {\n    status: \"success\",\n    message: \"\"\n  }\n};\nconst initContextValue = {\n  ...initStateValue,\n  updatePosts: posts => {},\n  updateSearchDate: searchDate => {},\n  updateIsVoted: isVoted => {},\n  updateIsAddedNew: isVoted => {},\n  updateLoading: loading => {},\n  updateNotify: notify => {},\n  updatePost: (id, updatedData) => {} // Initialize this\n};\nexport const GlobalContext = /*#__PURE__*/createContext(initContextValue);\nexport function PostsContext({\n  children\n}) {\n  _s();\n  const [state, setState] = useState(initStateValue);\n  const updatePosts = posts => {\n    setState(prev => ({\n      ...prev,\n      posts\n    }));\n  };\n  const updateSearchDate = searchDate => {\n    setState(prev => ({\n      ...prev,\n      searchDate\n    }));\n  };\n  const updateIsVoted = isVoted => {\n    setState(prev => ({\n      ...prev,\n      isVoted\n    }));\n  };\n  const updateIsAddedNew = isAddedNew => {\n    setState(prev => ({\n      ...prev,\n      isAddedNew\n    }));\n  };\n  const updateLoading = loading => {\n    setState(prev => ({\n      ...prev,\n      loading\n    }));\n  };\n  const updateNotify = notify => {\n    setState(prev => ({\n      ...prev,\n      notify\n    }));\n  };\n\n  // New function to update a single post\n  const updatePost = (id, updatedData) => {\n    fetch(`http://localhost:3000/posts/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...updatedData,\n        date: state.searchDate.toISOString().split('T')[0]\n      })\n    }).then(response => response.json()).then(updatedPost => {\n      setState(prev => ({\n        ...prev,\n        posts: prev.posts.map(post => post.id === id ? updatedPost : post)\n      }));\n      updateNotify({\n        status: \"success\",\n        message: \"Post updated successfully\"\n      });\n    }).catch(error => {\n      console.error(error);\n      updateNotify({\n        status: \"error\",\n        message: \"Failed to update the post\"\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: {\n      posts: state.posts,\n      searchDate: state.searchDate,\n      isVoted: state.isVoted,\n      isAddedNew: state.isAddedNew,\n      loading: state.loading,\n      notify: state.notify,\n      updatePosts,\n      updateSearchDate,\n      updateIsVoted,\n      updateIsAddedNew,\n      updateLoading,\n      updateNotify,\n      updatePost // Provide the updatePost function in the context\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n_s(PostsContext, \"8NE/LJNgMuB9zFYEYahgz0RSuEM=\");\n_c = PostsContext;\nvar _c;\n$RefreshReg$(_c, \"PostsContext\");","map":{"version":3,"names":["createContext","useState","jsxDEV","_jsxDEV","initStateValue","posts","searchDate","Date","isVoted","isAddedNew","loading","notify","status","message","initContextValue","updatePosts","updateSearchDate","updateIsVoted","updateIsAddedNew","updateLoading","updateNotify","updatePost","id","updatedData","GlobalContext","PostsContext","children","_s","state","setState","prev","fetch","method","headers","body","JSON","stringify","date","toISOString","split","then","response","json","updatedPost","map","post","catch","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/firanolabdisa/Desktop/cs472-project/daily-diary-front/src/contexts/PostsContext.tsx"],"sourcesContent":["import { createContext, ReactNode, useState } from \"react\";\nimport { Post } from \"../models/Post\";\nimport { AlertColor } from \"@mui/material\";\n\ntype StateType = {\n    posts: Post[];\n    searchDate: Date;\n    isVoted: boolean;\n    isAddedNew: boolean;\n    loading: boolean;\n    notify: Notify;\n};\n\ntype Notify = {\n    status: AlertColor;\n    message: string;\n};\n\nconst initStateValue = {\n    posts: [] as Post[],\n    searchDate: new Date(),\n    isVoted: false,\n    isAddedNew: false,\n    loading: false,\n    notify: { status: \"success\" as AlertColor, message: \"\" },\n};\n\nexport type ContextType = {\n    posts: Post[];\n    searchDate: Date;\n    isVoted: boolean;\n    isAddedNew: boolean;\n    loading: boolean;\n    notify: {\n        status: AlertColor;\n        message: string;\n    };\n    updatePosts: Function;\n    updateSearchDate: Function;\n    updateIsVoted: Function;\n    updateIsAddedNew: Function;\n    updateLoading: Function;\n    updateNotify: Function;\n    updatePost: (id: string, updatedData: { title: string; body: string }) => void; // Add this line\n};\n\nconst initContextValue = {\n    ...initStateValue,\n    updatePosts: (posts: Post[]) => {},\n    updateSearchDate: (searchDate: Date) => {},\n    updateIsVoted: (isVoted: boolean) => {},\n    updateIsAddedNew: (isVoted: boolean) => {},\n    updateLoading: (loading: boolean) => {},\n    updateNotify: (notify: Notify) => {},\n    updatePost: (id: string, updatedData: { title: string; body: string }) => {}, // Initialize this\n};\n\nexport const GlobalContext = createContext(initContextValue);\n\nexport function PostsContext({ children }: { children: ReactNode }) {\n    const [state, setState] = useState<StateType>(initStateValue);\n\n    const updatePosts = (posts: Post[]) => {\n        setState((prev) => ({ ...prev, posts }));\n    };\n\n    const updateSearchDate = (searchDate: Date) => {\n        setState((prev) => ({ ...prev, searchDate }));\n    };\n\n    const updateIsVoted = (isVoted: boolean) => {\n        setState((prev) => ({ ...prev, isVoted }));\n    };\n\n    const updateIsAddedNew = (isAddedNew: boolean) => {\n        setState((prev) => ({ ...prev, isAddedNew }));\n    };\n\n    const updateLoading = (loading: boolean) => {\n        setState((prev) => ({ ...prev, loading }));\n    };\n\n    const updateNotify = (notify: Notify) => {\n        setState((prev) => ({ ...prev, notify }));\n    };\n\n    // New function to update a single post\n    const updatePost = (id: string, updatedData: { title: string; body: string }) => {\n        fetch(`http://localhost:3000/posts/${id}`, {\n            method: \"PUT\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ ...updatedData, date: state.searchDate.toISOString().split('T')[0] }),\n        })\n            .then(response => response.json())\n            .then((updatedPost: Post) => {\n                setState((prev) => ({\n                    ...prev,\n                    posts: prev.posts.map((post) => (post.id === id ? updatedPost : post)),\n                }));\n                updateNotify({ status: \"success\", message: \"Post updated successfully\" });\n            })\n            .catch(error => {\n                console.error(error);\n                updateNotify({ status: \"error\", message: \"Failed to update the post\" });\n            });\n    };\n\n    return (\n        <GlobalContext.Provider\n            value={{\n                posts: state.posts,\n                searchDate: state.searchDate,\n                isVoted: state.isVoted,\n                isAddedNew: state.isAddedNew,\n                loading: state.loading,\n                notify: state.notify,\n                updatePosts,\n                updateSearchDate,\n                updateIsVoted,\n                updateIsAddedNew,\n                updateLoading,\n                updateNotify,\n                updatePost, // Provide the updatePost function in the context\n            }}\n        >\n            {children}\n        </GlobalContext.Provider>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}